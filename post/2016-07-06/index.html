	<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.19" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>renpy (1) 基礎語句 &middot; Denny&#39;s Blog</title>
  

  
  <link rel="stylesheet" href="https://cdfq152313.github.io/css/poole.css">
  <link rel="stylesheet" href="https://cdfq152313.github.io/css/syntax.css">
  <link rel="stylesheet" href="https://cdfq152313.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Denny&#39;s Blog" />
</head>

	<body class="theme-base-0f ">
		<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://cdfq152313.github.io/"><h1>Denny&#39;s Blog</h1></a>
      <p class="lead">
       獸控天地 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
        <li><a href="/categories/notes"> 程式筆記 </a></li>
      
        <li><a href="/categories/misc"> 心得雜感 </a></li>
      
        <li><a href="/tags/"> 標籤列表 </a></li>
      
        <li><a href="/about/"> 關於我 </a></li>
      
    </ul>

    <p>&copy; 2017. All rights reserved. </p>
  </div>
</div>


		<div class="content container">
			<div class="post">
			 	<h1>renpy (1) 基礎語句</h1>
			  <span class="post-date">Wed, Jul 6, 2016</span>
			      

<h1 id="緣起">緣起</h1>

<p>其實很多內容在 <strong>雪凡與好朋友們的 Ren&rsquo;Py 遊戲引擎初學心得提示</strong> 就有了，大概寫一些製作時的心得而已。
- <a href="http://www.openfoundry.org/foss-programs/8811">第一回</a>
- <a href="http://www.openfoundry.org/foss-programs/8836">第二回</a>
- <a href="http://www.openfoundry.org/foss-programs/8848">第三回</a>
- <a href="http://www.openfoundry.org/foss-programs/8859">第四回</a>
- <a href="http://www.openfoundry.org/foss-programs/8874">第五回</a>
-   <a href="http://www.openfoundry.org/foss-programs/8901">第六回</a>
- <a href="http://www.openfoundry.org/foss-programs/8919">第七回</a>
- <a href="http://www.openfoundry.org/foss-programs/8972">第八回</a>
- <a href="http://www.openfoundry.org/foss-programs/9045">第九回</a></p>

<p>搭配<a href="https://www.renpy.org/doc/html/index.html">renpy官網</a>服用，妙不可言。</p>

<h1 id="檔案目錄">檔案目錄</h1>

<p>初學要知道的在renpy中有三個區段。我稱之為init區段，label區段以及python區段。這三個區段的語法都略有不同。
而撰寫語法的檔案，只要在game目錄下新增.rpy檔即可，不管命名為何，renpy會預設載入game目錄下所有的.rpy檔作為renpy的語法輸入。</p>

<p>接下來就分別說明三個區段的差異之處。</p>

<h2 id="init區段">init區段</h2>

<p>新增一個.rpy檔，若無明確指定為label或python區段，那就可以視為 init 0區段了。
init區段通常做為定義變數、圖片、screen之用，會在遊戲啟動的瞬間先行載入。
init區段可以透過下列語法來新增</p>

<pre><code class="language-python">init -1:
    define abc = character(&quot;abc&quot;)
    image def = &quot;def&quot;
</code></pre>

<p>init旁邊接的數字的意義為載入順序(若沒寫則為0)，比如說，若有三個init區段</p>

<pre><code class="language-python">init 1:
    image a = &quot;a&quot;
init 2:
    image b = &quot;b&quot;
init 3:
    image c = &quot;c&quot;
</code></pre>

<p>雖然撰寫順序為由上往下，但由於數字大的先載入，所以renpy會先讀取image c，接下來是b，最後才為a。
如果有載入順序的要求的話(雖然我還沒遇過)，可以嘗試看看這招。</p>

<h2 id="label區段">label區段</h2>

<p>此處為遊戲運行之腳本，對於玩過avg遊戲的人應該很熟悉，就是讓你可以點一點繼續向下看對話的地方。
可以運用show , call, with dissolve之類的語句來展現對話效果。
這裡列出兩個極為重要的保留(reserved) label</p>

<pre><code class="language-python">label start:
    a &quot;Are u ok&quot;
    b &quot;I'm fine.&quot;

label splashscreen:
    &quot;hello moto&quot;
</code></pre>

<p>現在市面上遊戲開始的流程大致如下
(開啟遊戲) 遊戲廠商logo(或片頭動畫) =&gt; 遊戲主選單 =&gt; 進入遊戲主題</p>

<p>label start為預設的遊戲主題進入點，當你使用Start()這個函式時即會自動跳轉到start label所在的位置。
label splashscreen則可以作為遊戲廠商logo或片頭動畫之用，是進入遊戲主選單前要執行之語句。</p>

<p>其他重要的label可參照<a href="https://www.renpy.org/doc/html/label.html#special-labels">官網</a></p>

<p>另外，若無指定<strong>main_menu</strong>此label，則<strong>screen main_menu</strong>是預設的遊戲主選單畫面。</p>

<h2 id="python區段">python區段</h2>

<p>在撰寫renpy的時候應該多數人都會覺得自己是在寫renpy而非寫python，雖然語法相似，很多地方還是有不同XD
另外，renpy語法雖然已經夠強大，但有些時候還是得靠python才能做到一些renpy不支援的特效。於是renpy也支援在renpy中插入python語法。</p>

<p>最基本的插入法可看下列程式碼</p>

<pre><code class="language-python">$ x = &quot;abc&quot;
$ y = &quot;def&quot;

python:
    x = &quot;abc&quot;
    y = &quot;def&quot;
</code></pre>

<p>這兩種寫法都是同義的，如果你只想寫一行python，可以考慮使用 $ 符號，如果你想一次撰寫多行(例如function)可以用python:的方式來撰寫。</p>

<p>在label區段中，插入python code應該沒任何問題，不過在init區段的screen language當中，插入python的位置就要小心。</p>

<pre><code class="language-python">screen test:
    python:
        def func():
            pass
    frame:
        textbutton &quot;abc&quot;:
            action Function(func)
</code></pre>

<pre><code class="language-python">screen test:
    frame:
        python:
            def func():
                pass
        textbutton &quot;abc&quot;:
            action Function(func)
</code></pre>

<p>這兩個寫法只是將python code稍微移動一下而已，但是下面那個版本在renpy 6.98的版本會找不到func。可能跟renpy的載入順序有關。
所以我個人是建議使用若要在screen中使用python，最好在使用前的上一層結構就先行定義。
但，如果是使用 $ 符號，好像就沒有這個問題。</p>

<p>python區段也可以為init，在最初的時候就先行載入，而非等到程式執行到了才動態載入。語法如下</p>

<pre><code class="language-python">init 2 python:
    x = &quot;abc&quot;
</code></pre>

<p>同樣的init後面的數字為載入之優先權，若無指定則為0。</p>

			</div>

			
		</div>

  </body>
</html>
